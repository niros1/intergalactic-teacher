@tailwind base;
@tailwind components;
@tailwind utilities;

/* Child-friendly base styles */
@layer base {
  html {
    font-family: 'Comic Sans MS', cursive, system-ui, sans-serif;
    font-size: 18px;
    line-height: 1.6;
  }

  body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 75%, #ffd1dc 100%);
    background-attachment: fixed;
    color: #2d3748;
    position: relative;
  }

  /* Animated background elements */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(circle at 20% 80%, rgba(255, 206, 84, 0.2) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.2) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(132, 94, 247, 0.2) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
  }

  /* Hebrew text support */
  [dir="rtl"] {
    font-family: Arial, Hebrew, sans-serif;
  }

  /* Smooth scrolling for better UX */
  * {
    scroll-behavior: smooth;
  }
}

/* Child-friendly component styles */
@layer components {
  .btn-primary {
    @apply bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all duration-300 transform hover:scale-110 hover:rotate-1 active:scale-95;
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3), 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .btn-primary:hover {
    box-shadow: 0 12px 35px rgba(59, 130, 246, 0.4), 0 6px 15px rgba(0, 0, 0, 0.15);
  }

  .btn-secondary {
    @apply bg-gradient-to-r from-purple-400 to-pink-400 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all duration-300 transform hover:scale-110 hover:rotate-1 active:scale-95;
    box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3), 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .btn-secondary:hover {
    box-shadow: 0 12px 35px rgba(168, 85, 247, 0.4), 0 6px 15px rgba(0, 0, 0, 0.15);
  }

  .btn-success {
    @apply bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all duration-300 transform hover:scale-110 hover:rotate-1 active:scale-95;
    box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3), 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .btn-success:hover {
    box-shadow: 0 12px 35px rgba(34, 197, 94, 0.4), 0 6px 15px rgba(0, 0, 0, 0.15);
  }

  .card-child {
    @apply bg-white rounded-3xl shadow-2xl p-6 border-2 border-transparent hover:border-pink-300 transition-all duration-300 transform hover:scale-105 hover:-rotate-1;
    background: linear-gradient(145deg, #ffffff 0%, #fef7ff 100%);
    box-shadow: 
      0 10px 30px rgba(0, 0, 0, 0.1),
      0 1px 8px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .card-child:hover {
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.15),
      0 5px 15px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }

  .text-child {
    @apply text-xl leading-relaxed;
    font-weight: 500;
  }

  .text-child-sm {
    @apply text-lg leading-relaxed;
    font-weight: 500;
  }

  .text-child-base {
    @apply text-xl leading-relaxed;
    font-weight: 500;
  }

  .text-child-lg {
    @apply text-2xl leading-relaxed;
    font-weight: 600;
  }

  .text-child-xl {
    @apply text-3xl leading-relaxed;
    font-weight: 700;
  }

  .heading-child {
    @apply text-4xl font-black mb-6;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    letter-spacing: -0.02em;
  }

  /* Story Chat Interface Styles */
  .story-message-text {
    @apply p-6 rounded-3xl;
    position: relative;
  }

  .story-content {
    @apply text-child-base leading-relaxed;
    font-weight: 500;
    color: #2d3748;
  }

  .story-audio-controls {
    @apply flex justify-end mt-3;
  }

  /* Assistant-UI customizations for child-friendly interface */
  .aui-thread-root {
    @apply font-sans;
    position: relative;
  }

  .aui-thread-viewport {
    @apply p-6;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    margin: 8px;
  }

  .aui-assistant-message-root {
    @apply mb-8;
    animation: slideInLeft 0.6s ease-out;
  }

  .aui-assistant-message-content {
    @apply rounded-3xl p-6 shadow-2xl;
    background: linear-gradient(145deg, #e0f2fe 0%, #f0f9ff 100%);
    border: 2px solid rgba(14, 165, 233, 0.2);
    position: relative;
  }

  /* Speech bubble tail for assistant messages */
  .aui-assistant-message-content::before {
    content: '';
    position: absolute;
    left: -8px;
    top: 20px;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 8px 8px 8px 0;
    border-color: transparent #e0f2fe transparent transparent;
  }

  .aui-user-message-root {
    @apply mb-8 flex justify-end;
    animation: slideInRight 0.6s ease-out;
  }

  .aui-user-message-content {
    @apply rounded-3xl p-6 shadow-2xl max-w-md;
    background: linear-gradient(145deg, #fce7ff 0%, #f3e8ff 100%);
    border: 2px solid rgba(217, 70, 239, 0.2);
    position: relative;
  }

  /* Speech bubble tail for user messages */
  .aui-user-message-content::before {
    content: '';
    position: absolute;
    right: -8px;
    top: 20px;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 8px 0 8px 8px;
    border-color: transparent transparent transparent #fce7ff;
  }

  .aui-composer-root {
    @apply rounded-3xl shadow-2xl p-6;
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
    border: 3px solid transparent;
    background-clip: padding-box;
    position: relative;
  }

  .aui-composer-root::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 3px;
    background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
    border-radius: 24px;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    z-index: -1;
  }

  .aui-composer-input {
    @apply text-child-base p-4 rounded-2xl border-0;
    background: linear-gradient(145deg, #f8fafc 0%, #ffffff 100%);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .aui-composer-input:focus {
    box-shadow: 
      inset 0 2px 4px rgba(0, 0, 0, 0.1),
      0 0 0 3px rgba(59, 130, 246, 0.2),
      0 4px 12px rgba(59, 130, 246, 0.15);
    transform: translateY(-2px);
  }

  .aui-thread-welcome-root {
    @apply text-center py-12;
    position: relative;
  }

  .aui-thread-welcome-message {
    @apply text-child-xl font-black mb-8;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: bounce 2s infinite;
  }

  .aui-thread-welcome-suggestions {
    @apply flex flex-wrap gap-6 justify-center;
  }

  .aui-thread-welcome-suggestion {
    @apply text-white font-bold py-4 px-8 rounded-3xl shadow-xl transition-all duration-300 transform hover:scale-110 hover:rotate-2 cursor-pointer;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 25%, #0abde3 50%, #00d2d3 75%, #ff9ff3 100%);
    background-size: 300% 300%;
    animation: gradientShift 3s ease infinite;
  }

  .aui-thread-welcome-suggestion:hover {
    animation-play-state: paused;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
  }

  .aui-thread-welcome-suggestion-text {
    @apply text-child-base font-bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  /* RTL support for Hebrew */
  .rtl .aui-assistant-message-root {
    @apply flex justify-end;
  }

  .rtl .aui-user-message-root {
    @apply flex justify-start;
  }

  .rtl .aui-assistant-message-content {
    @apply text-right;
  }

  .rtl .aui-user-message-content {
    @apply text-right;
  }

  /* RTL speech bubble adjustments */
  .rtl .aui-assistant-message-content::before {
    left: auto;
    right: -8px;
    border-width: 8px 0 8px 8px;
    border-color: transparent transparent transparent #e0f2fe;
  }

  .rtl .aui-user-message-content::before {
    right: auto;
    left: -8px;
    border-width: 8px 8px 8px 0;
    border-color: transparent #fce7ff transparent transparent;
  }

  /* Fun loading animations */
  .story-loading {
    @apply flex items-center justify-center space-x-2;
  }

  .story-loading-dot {
    @apply w-3 h-3 rounded-full;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    animation: bounce 1.4s infinite ease-in-out both;
  }

  .story-loading-dot:nth-child(1) { animation-delay: -0.32s; }
  .story-loading-dot:nth-child(2) { animation-delay: -0.16s; }

  /* Audio button enhancements */
  .story-audio-button {
    @apply transition-all duration-300 transform hover:scale-125 active:scale-95;
    background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
  }

  .story-audio-button:hover {
    box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
  }

  .story-audio-button.playing {
    animation: pulse 1.5s infinite;
    background: linear-gradient(135deg, #ee5a24 0%, #0abde3 100%);
  }

  /* Enhanced story controls layout */
  .story-audio-controls {
    @apply flex items-center justify-between mt-4 px-2;
  }

  /* Progress bar enhancements */
  .story-progress-bar {
    background: linear-gradient(90deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
    border-radius: 10px;
    height: 8px;
    transition: all 0.3s ease;
  }

  .story-progress-container {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    padding: 2px;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

/* Keyframe animations */
@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes bounce {
  0%, 20%, 53%, 80%, to {
    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    transform: translate3d(0, -8px, 0);
  }
  70% {
    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
    transform: translate3d(0, -4px, 0);
  }
  90% {
    transform: translate3d(0, -2px, 0);
  }
}

@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@keyframes pulse {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    opacity: 1;
  }
}

/* Floating elements animation for playful atmosphere */
@keyframes float {
  0% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
  100% {
    transform: translateY(0px);
  }
}
